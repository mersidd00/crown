<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>استمارة الطلب</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Cairo', sans-serif; }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
<div class="bg-white rounded-xl shadow-lg p-6 w-full max-w-sm">
  <h3 class="text-center text-xl mb-4 font-bold">استمارة الطلب</h3>
  <form id="orderForm" class="space-y-3" novalidate>
    <div>
      <label class="block mb-1 text-gray-700">الاسم و اللقب</label>
      <input type="text" name="fullname" id="fullname" class="w-full border rounded px-3 py-2 focus:outline-none bg-gray-100" placeholder="الاسم و اللقب">
      <p class="text-red-600 text-sm mt-1 hidden" id="nameError">يرجى إدخال الاسم و اللقب</p>
    </div>
    <div>
      <label class="block mb-1 text-gray-700">رقم الهاتف</label>
      <input type="text" name="phone" id="phone" class="w-full border rounded px-3 py-2 focus:outline-none bg-gray-100" placeholder="رقم الهاتف">
      <p class="text-red-600 text-sm mt-1 hidden" id="phoneError">يرجى إدخال رقم الهاتف</p>
    </div>
    <div>
      <label class="block mb-1 text-gray-700">الولاية</label>
      <select name="wilaya" id="wilaya" class="w-full border rounded px-3 py-2 bg-gray-100">
        <option value="">- الولاية -</option>
        <option value="1">01 - أدرار</option>
        <option value="2">02 - الشلف</option>
        <option value="3">03 - الأغواط</option>
        <option value="4">04 - أم البواقي</option>
        <option value="5">05 - باتنة</option>
        <option value="6">06 - بجاية</option>
        <option value="7">07 - بسكرة</option>
        <option value="8">08 - بشار</option>
        <option value="9">09 - البليدة</option>
        <option value="10">10 - البويرة</option>
        <option value="11">11 - تمنراست</option>
        <option value="12">12 - تبسة</option>
        <option value="13">13 - تلمسان</option>
        <option value="14">14 - تيارت</option>
        <option value="15">15 - تيزي وزو</option>
        <option value="16">16 - الجزائر</option>
        <option value="17">17 - الجلفة</option>
        <option value="18">18 - جيجل</option>
        <option value="19">19 - سطيف</option>
        <option value="20">20 - سعيدة</option>
        <option value="21">21 - سكيكدة</option>
        <option value="22">22 - سيدي بلعباس</option>
        <option value="23">23 - عنابة</option>
        <option value="24">24 - قالمة</option>
        <option value="25">25 - قسنطينة</option>
        <option value="26">26 - المدية</option>
        <option value="27">27 - مستغانم</option>
        <option value="28">28 - المسيلة</option>
        <option value="29">29 - معسكر</option>
        <option value="30">30 - ورقلة</option>
        <option value="31">31 - وهران</option>
        <option value="32">32 - البيض</option>
        <option value="33">33 - إليزي</option>
        <option value="34">34 - برج بوعريريج</option>
        <option value="35">35 - بومرداس</option>
        <option value="36">36 - الطارف</option>
        <option value="37">37 - تندوف</option>
        <option value="38">38 - تيسمسيلت</option>
        <option value="39">39 - الوادي</option>
        <option value="40">40 - خنشلة</option>
        <option value="41">41 - سوق أهراس</option>
        <option value="42">42 - تيبازة</option>
        <option value="43">43 - ميلة</option>
        <option value="44">44 - عين الدفلى</option>
        <option value="45">45 - النعامة</option>
        <option value="46">46 - عين تموشنت</option>
        <option value="47">47 - غرداية</option>
        <option value="48">48 - غليزان</option>
        <option value="49">49 - تيميمون</option>
        <option value="50">50 - برج باجي مختار</option>
        <option value="51">51 - أولاد جلال</option>
        <option value="52">52 - بني عباس</option>
        <option value="53">53 - عين صالح</option>
        <option value="54">54 - عين قزام</option>
        <option value="55">55 - تقرت</option>
        <option value="56">56 - جانت</option>
        <option value="57">57 - المغير</option>
        <option value="58">58 - المنيعة</option>
      </select>
      <p class="text-red-600 text-sm mt-1 hidden" id="wilayaError">يرجى اختيار الولاية</p>
    </div>
    <div>
      <label class="block mb-1 text-gray-700">تكاليف التوصيل</label>
      <div class="flex flex-col gap-1">
        <label class="flex items-center">
          <input type="radio" name="delivery" value="office" checked class="ml-2"> التوصيل الى المكتب
        </label>
        <label class="flex items-center">
          <input type="radio" name="delivery" value="home" class="ml-2"> التوصيل الى المنزل
        </label>
      </div>
    </div>
    <div class="flex justify-between items-center bg-gray-50 px-3 py-2 rounded my-2 border">
      <span>المجموع الكلي</span>
      <span id="mainTotal">دج 17000.00</span>
    </div>
    <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white rounded py-3 text-lg mt-2 font-bold">تأكيد الطلب</button>
  </form>
</div>
<script>
  // جدول رسوم التوصيل للمنزل حسب الولاية
  const deliveryHome = {
    1: 1400, 2: 700, 3: 850, 4: 750, 5: 750, 6: 750, 7: 900, 8: 1000, 9: 500, 10: 700, 11: 1600, 12: 800, 13: 750, 14: 750, 15: 750, 16: 400, 17: 850, 18: 750, 19: 750, 20: 750, 21: 750, 22: 750, 23: 750, 24: 750, 25: 750, 26: 700, 27: 750, 28: 750, 29: 750, 30: 900, 31: 750, 32: 1000, 33: 1900, 34: 750, 35: 550, 36: 750, 37: 1500, 38: 700, 39: 1000, 40: 850, 41: 800, 42: 550, 43: 750, 44: 750, 45: 1000, 46: 750, 47: 900, 48: 750, 49: 1500, 50: 0, 51: 900, 52: 1100, 53: 1900, 54: 0, 55: 900, 56: 0, 57: 950, 58: 1100
  };

  // جدول رسوم المكتب (ثابت أو غيّره إذا أردت)
  const deliveryOffice = 500;

  const inputFields = ['fullname', 'phone', 'wilaya'];
  function validateField(fieldId, errorId) {
    const field = document.getElementById(fieldId);
    const error = document.getElementById(errorId);
    if (!field.value.trim()) {
      field.classList.add('border-red-500');
      error.classList.remove('hidden');
      return false;
    } else {
      field.classList.remove('border-red-500');
      error.classList.add('hidden');
      return true;
    }
  }

  function updateTotal() {
    const basePrice = 17000;
    const wilaya = document.getElementById('wilaya').value;
    const deliveryType = document.querySelector('input[name="delivery"]:checked').value;
    let deliveryPrice = 0;
    if (deliveryType === "office") {
      deliveryPrice = deliveryOffice;
    } else if (deliveryType === "home" && deliveryHome[wilaya]) {
      deliveryPrice = deliveryHome[wilaya];
    } else if (deliveryType === "home" && !deliveryHome[wilaya]) {
      deliveryPrice = 0;
    }
    document.getElementById('mainTotal').innerText = 'دج ' + (basePrice + deliveryPrice).toLocaleString();
  }
  document.getElementById('wilaya').addEventListener('change', updateTotal);
  document.querySelectorAll('input[name="delivery"]').forEach(radio => {
    radio.addEventListener('change', updateTotal);
  });

  document.getElementById('orderForm').addEventListener('submit', function(e) {
    let valid = true;
    valid &= validateField('fullname', 'nameError');
    valid &= validateField('phone', 'phoneError');
    valid &= validateField('wilaya', 'wilayaError');
    if (!valid) {
      e.preventDefault();
    }
  });

  inputFields.forEach(id => {
    document.getElementById(id).addEventListener('input', function() {
      validateField(id, id + 'Error');
    });
  });

  // تحديث المجموع عند بداية الصفحة
  updateTotal();
</script>
</body>
</html>
